{% extends "base.html" %}

{% block content %}
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<style>
    .content-wrapper {
        background-color: #f3e5f5; 
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    header {
        background: #6a1b9a; 
        color: #fff;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
    }
    header h1 {
        margin: 0;
        text-transform: uppercase;
    }
    section {
        padding: 20px;
        margin: 20px 0;
    }
    h2 {
        color: #6a1b9a; 
    }
    .form-container {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .question {
        display: none; 
    }
    .question.active {
        display: block; 
    }
</style>

<div class="container mt-3">
    <h1>Welcome to the Grape Guide</h1>
    <p>
        Finding the right wine can be challenging with so many options available. 
        Our guide is here to help you navigate through the vast selection and find the perfect wine for any occasion. 
        Whether you're looking for a wine to pair with a specific dish or just exploring new varieties, we've got you covered.
        Use the form below to find the perfect wine based on your preferences.
    </p>
</div>

<div class="container mt-5 form-container">
    <form class="pb-4" id="filter-form" method="GET" action="{{ url_for('wines') }}">
        <!-- Question 1 -->
        <div class="question active" id="question1">
            <h5><strong>What type of wine are you looking for?</strong></h5>
            <p>Select from a variety of options, including reds, whites, rosés, sparkling, and more.</p>
            <select id="type" name="type" class="form-control">
                <option value="">All</option>
                {% for type in unique_types %}
                    <option value="{{ type }}" {% if request.args.get('type') == type %} selected {% endif %}>{{ type }}</option>
                {% endfor %}
            </select>
            <button type="button" class="btn btn-primary mt-3" onclick="nextQuestion(1)">Next</button>
        </div>

        <!-- Question 2 -->
        <div class="question" id="question2">
            <h5><strong>What dish are you pairing with your wine?</strong></h5>
            <p>Whether it's a hearty main course, a light salad, or a decadent dessert, we’ll suggest wines that bring out the best in your meal.</p>
            <select id="pairing" name="pairing" class="form-control">
                <option value="">All</option>
                <option value="meat" {% if request.args.get('pairing') == 'meat' %} selected {% endif %}>Meat</option>
                <option value="poultry" {% if request.args.get('pairing') == 'poultry' %} selected {% endif %}>Poultry</option>
                <option value="fish" {% if request.args.get('pairing') == 'fish' %} selected {% endif %}>Fish</option>
                <option value="cheese" {% if request.args.get('pairing') == 'cheese' %} selected {% endif %}>Cheese</option>
                <option value="vegetables" {% if request.args.get('pairing') == 'vegetables' %} selected {% endif %}>Vegetables</option>
            </select>            
            <button type="button" class="btn btn-primary mt-3" onclick="nextQuestion(2)">Next</button>
        </div>

        <!-- Question 3 -->
        <div class="question" id="question3">
            <h5><strong>What is your price range?</strong></h5>
            <p>Set your minimum and maximum price to find wines that fit your budget, from affordable everyday bottles to premium vintages.</p>
            <div class="container">
                <div class="row">
                    <div class="col p-1">
                        <input type="number" id="price_min" name="price_min" class="form-control" placeholder="Min"
                               value="{{ request.args.get('price_min', '') }}">
                    </div>
                    <div class="col-sm p-1">
                        <input type="number" id="price_max" name="price_max" class="form-control" placeholder="Max"
                               value="{{ request.args.get('price_max', '') }}">
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary mt-3">Find My Wine</button>
        </div>
    </form>
</div>

<div class="container mt-5">
    <h2>How to Use Our Wine Finder</h2>
    <p><strong>Explore by Occasion:</strong> Are you selecting a wine for a dinner party, a quiet evening at home, or a special celebration? Use our guide to find the best match for any event.</p>
    
    <p><strong>Food Pairings Made Simple:</strong> Choosing the right wine to pair with your meal can elevate the dining experience. Whether it's a delicate seafood dish, a cheese platter, or a grilled steak, our guide helps you find the perfect complement.</p>
    
    <p><strong>Flexible Pricing Options:</strong> No matter your budget, we make it easy to discover excellent wines that won’t break the bank. Just set your preferred price range and let us do the rest.</p>
</div>

<script>
    function nextQuestion(current) {
        // Hide the current question
        document.getElementById('question' + current).classList.remove('active');
        
        // Show the next question
        document.getElementById('question' + (current + 1)).classList.add('active');
    }
</script>

{% endblock %}
