{% extends "base.html" %}

{% block content %}
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<style>
    .content-wrapper {
        background-color: #f3e5f5; 
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    header {
        background: #6a1b9a; 
        color: #fff;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
    }
    header h1 {
        margin: 0;
        text-transform: uppercase;
    }
    section {
        padding: 20px;
        margin: 20px 0;
    }
    .form-container {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .question {
        display: none; 
    }
    .question.active {
        display: block; 
    }
</style>

<div class="container mt-3 pb-1 w-75">
    <h1>Welcome to the Grape Guide</h1>
    <p>
        Finding the right wine can be challenging with so many options available. 
        Our guide is here to help you navigate through the vast selection and find the perfect wine for any occasion. 
        Whether you're looking for a wine to pair with a specific dish or just exploring new varieties, we've got you covered.
        Use the form below to find the perfect wine based on your preferences.
    </p>
</div>
<div ><hr class="mt-2 mb-3" style="border: 1px solid #9d36add5;"></div>

<div class="container pt-2 pb-2  w-75 text-center">
    <h4>Type of wine + Type of dish + Budget = Matching Wines for You</h4>
 </div>
 <div ><hr class="mt-2 mb-1" style="border: 1px solid #9d36add5;"></div>

<div class="container mt-4 pb-4 form-container w-50">
    <form class="pb-4" id="filter-form" method="GET" action="{{ url_for('wines') }}">
        <!-- Question 1 -->
        <div class="question active" id="question1">
            <h5><strong>What type of wine are you looking for?</strong></h5>
            <p>Select from a variety of options, including reds, whites and rosés.</p>
            <select id="type" name="type" class="form-control w-25">
                <option value="">All</option>
                {% for type in unique_types %}
                    <option value="{{ type }}" {% if request.args.get('type') == type %} selected {% endif %}>{{ type }}</option>
                {% endfor %}
            </select>
            <button type="button" class="btn btn-primary mt-3" onclick="nextQuestion(1)">Next</button>
        </div>

        <!-- Question 2 -->
        <div class="question" id="question2">
            <h5><strong>What dish are you pairing with your wine?</strong></h5>
            <p>Whether it's a hearty main course, a light salad, or a decadent dessert, we’ll suggest wines that bring out the best in your meal.</p>
            <select id="pairing" name="pairing" class="form-control w-25">
                <option value="">All</option>
                <option value="meat" {% if request.args.get('pairing') == 'meat' %} selected {% endif %}>Meat</option>
                <option value="poultry" {% if request.args.get('pairing') == 'poultry' %} selected {% endif %}>Poultry</option>
                <option value="fish" {% if request.args.get('pairing') == 'fish' %} selected {% endif %}>Fish</option>
                <option value="cheese" {% if request.args.get('pairing') == 'cheese' %} selected {% endif %}>Cheese</option>
                <option value="vegetables" {% if request.args.get('pairing') == 'vegetables' %} selected {% endif %}>Vegetables</option>
            </select>            
            <button type="button" class="btn btn-primary mt-3" onclick="prevQuestion(2)">Previous</button>
            <button type="button" class="btn btn-primary mt-3" onclick="nextQuestion(2)">Next</button>
        </div>

        <!-- Question 3 -->
        <div class="question" id="question3">
            <h5><strong>What is your price range?</strong></h5>
            <p>Set your minimum and maximum price to find wines that fit your budget, from affordable everyday bottles to premium vintages.</p>
            <div class="container">
                <div class="row">
                    <div class="w-25 mr-3">
                        <input type="number" id="price_min" name="price_min" class="form-control w-100" placeholder="Min (£)"
                               value="{{ request.args.get('price_min', '') }}">
                    </div>
                    <div class="w-25">
                        <input type="number" id="price_max" name="price_max" class="form-control w-100" placeholder="Max (£)"
                               value="{{ request.args.get('price_max', '') }}">
                    </div>
                    <div>

                    </div>
                </div>
            </div>
            <button type="button" class="btn btn-primary mt-3" onclick="prevQuestion(3)">Previous</button>
            <button type="submit" class="btn btn-primary mt-3">Find My Wine</button>
        </div>
    </form>
</div>


<script>
    function nextQuestion(current) {
        // Hide the current question
        document.getElementById('question' + current).classList.remove('active');
        
        // Show the next question
        document.getElementById('question' + (current + 1)).classList.add('active');
    }

    function prevQuestion(current) {
        // Hide the current question
        document.getElementById('question' + current).classList.remove('active');
        
        // Show the next question
        document.getElementById('question' + (current - 1)).classList.add('active');
    }
</script>

{% endblock %}
